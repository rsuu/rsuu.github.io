<!doctype html><html lang=en theme=light><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=UTF-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1" name=viewport><meta content="index, follow" name=robots><title>The Little MIDI</title><meta content="The Little MIDI" name=title><meta content="贫民 MIDI 还是简陋了点" name=description><meta content=website property=og:type><meta content=https://rsuu.github.io/blog/midi/ property=og:url><meta property=og:site_name><meta content="The Little MIDI" property=og:title><meta content="贫民 MIDI 还是简陋了点" property=og:description><meta content=summary_large_image property=twitter:card><meta content=https://rsuu.github.io/blog/midi/ property=twitter:url><meta content="The Little MIDI" property=twitter:title><meta content="贫民 MIDI 还是简陋了点" property=twitter:description><link href=https://rsuu.github.io/blog/midi/ rel=canonical><link href=https://rsuu.github.io/atom.xml rel=alternate title=RSS type=application/atom+xml><link href=https://rsuu.github.io/style.css rel=stylesheet><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" onload="this.onload=null;this.rel='stylesheet'" as=style rel=preload><link href=https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css rel=stylesheet><body><div class=wrapper><header><div class=header-flex><div class=toggle-theme><button class="themeButton light" onclick="setTheme('light')" title="Light mode"><i data-lucide=sun></i></button><button class="themeButton dark" onclick="setTheme('dark')" title="Dark mode"><i class="ti ti-moon-stars"></i></button></div><div class=search><input name=search></div><div class=nav><div class=links><a href=/blog> home </a></div></div></div></header><main><h1>The Little MIDI</h1><div class=post-meta><div><span class=styled-date datetime=2024-07-01>July 01, 2024</span><span class=dividing></span><span class=category> media </span></div></div><h2 id=staff>Staff</h2><p>制谱这块我们用<a href=https://lilypond.org>LilyPond</a>,虽然用的是<code>LaTeX</code>那样的语法(还混入了<code>LISP</code>),但除此之外也没什么好的选择了,能在终端里使用还兼顾着这么完美的质量...<pre class=language-lilypond data-lang=lilypond style=color:#fdf4c1aa;background-color:#282828><code class=language-lilypond data-lang=lilypond><span>% test.ly
</span><span>\version "2.24.3"
</span><span>\language "english"
</span><span>
</span><span>\score {
</span><span>    \midi   {} 
</span><span>
</span><span>    \relative {
</span><span>        c d e f g a b
</span><span>    }
</span><span>}
</span></code></pre><p>然后轻轻地编译一下: <code>lilypond test.ly</code><h2 id=player>Player</h2><p><a href=https://github.com/FluidSynth/fluidsynth>FluidSynth</a>在<a href=https://termux.dev>Termux</a>上不知道为啥没声音,所以只能用<a href=https://github.com/mpv-player/mpv>MPV</a>来播放,绕了个小圈子.<p>虽然<a href=https://wiki.archlinux.org/title/Timidity++>TiMidity++</a>也可以播放<a href=https://en.wikipedia.org/wiki/MIDI>MIDI</a>,但他本身指定字体的方式过于繁琐(只能通过配置文件来指定),所以这里就选择了FluidSynth.<pre class=language-zsh data-lang=zsh style=color:#fdf4c1aa;background-color:#282828><code class=language-zsh data-lang=zsh><span style=color:#8ec07c>midi-play</span><span>() {
</span><span>    </span><span style=color:#928374;font-style:italic># https://archive.org/details/500-soundfonts-full-gm-sets
</span><span>    </span><span style=color:#fdf4c1>_NAME</span><span style=color:#fe8019>=</span><span style=color:#b8bb26>"Arachno.sf2"
</span><span>    </span><span style=color:#fdf4c1>_FONT</span><span style=color:#fe8019>=</span><span style=color:#b8bb26>"$</span><span style=color:#fdf4c1>HOME</span><span style=color:#b8bb26>/soundfonts/$</span><span style=color:#fdf4c1>_NAME</span><span style=color:#b8bb26>"
</span><span>    </span><span style=color:#fdf4c1>_FORMAT</span><span style=color:#fe8019>=</span><span style=color:#b8bb26>s16le
</span><span>    </span><span style=color:#fdf4c1>_RATIO</span><span style=color:#fe8019>=</span><span style=color:#b8bb26>44100
</span><span>
</span><span>    </span><span style=color:#fdf4c1>fluidsynth -nli -o synth.cpu-cores=8 \
</span><span style=color:#fdf4c1>        -r $_RATIO -g 2 -T raw -F - \
</span><span style=color:#fdf4c1>        -i $_FONT $1 \
</span><span>        </span><span style=color:#fe8019>| </span><span style=color:#fdf4c1>mpv \
</span><span style=color:#fdf4c1>        --demuxer</span><span style=color:#fe8019>=</span><span style=color:#fdf4c1>rawaudio \
</span><span style=color:#fdf4c1>        --demuxer-rawaudio-format</span><span style=color:#fe8019>=</span><span style=color:#fdf4c1>$_FORMAT \
</span><span style=color:#fdf4c1>        --demuxer-rawaudio-rate</span><span style=color:#fe8019>=</span><span style=color:#fdf4c1>$_RATIO \
</span><span style=color:#fdf4c1>        -
</span><span>}
</span></code></pre><p>DONE: <code>midi-play test.midi</code></main><footer><div class=footer-meta><div class=tags><a class=category href=/category/media>media</a><a href=/tags/midi>midi</a><a href=/tags/lilypond>lilypond</a><a href=/tags/staff>staff</a><a href=/tags/audio>audio</a></div><div class=author><a href=https://github.com/rsuu>rsuu</a></div></div><hr><div class=card><div class=left></div><div class=right><div class=prev></div><div class=next></div></div></div><div class=foot-container><div class=left><p>License: <a rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/MIT_License target=_blank>MIT</a><br> Built with <a rel="noopener noreferrer" href=https://www.getzola.org target=_blank>Zola</a>, theme based on <a href=https://github.com/Speyll/anemone>anemone</a>.</div><div class=right><a rel="noopener noreferrer" title="Subscribe via RSS for updates." class=icons__background href=https://rsuu.github.io/atom.xml target=_blank> <i class="ti ti-rss"></i> </a></div></div></footer><script defer src=https://rsuu.github.io/js/script.js></script><script defer src=https://rsuu.github.io/js/code_bar.js></script><script defer src=https://rsuu.github.io/js/icons.js type=module></script><script defer src=https://rsuu.github.io/js/heif.js type=module></script><script defer src=https://rsuu.github.io/js/carousel_card.js type=module></script><script defer src=https://rsuu.github.io/js/anim.js type=module></script><script defer src=https://rsuu.github.io/js/mermaid.js type=module></script><script defer src=https://esm.sh/css-doodle/css-doodle.min.js?raw></script><div class=wrap-giscus><script crossorigin data-category=General data-category-id=DIC_kwDOMPkDCs4CjHDF data-emit-metadata=0 data-input-position=top data-lang=en data-loading=lazy data-mapping=pathname data-reactions-enabled=1 data-repo=rsuu/rsuu.github.io data-repo-id=R_kgDOMPkDCg data-strict=0 data-theme=preferred_color_scheme defer src=https://giscus.app/client.js></script></div></div>